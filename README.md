# Phonebook Backend

## Description
This is the backend for a phonebook application. It provides a RESTful API for managing contacts, allowing users to list, add, delete, and search for people in the phonebook. The application is built with Node.js and Express, and it stores data in a MongoDB database.
## Features
1. **List Contacts**
	- **Endpoint:** `GET /api/persons`
	- Returns a list of contacts stored in the phonebook in JSON format
2. **Display General Information**
	- **Endpoint:** `GET /info`
	- Display the number of entries in the phonebook and the current server date/time
3. **Get a Contact by ID**
	- **Endpoint:** `GET /api/persons/:id`
	- Returns information about a specific contact. If the contact does not exist, it responds with an appropriate HTTP status code.
4. **Delete a Contact**
	- **Endpoint:** `DELETE /api/persons/:id`
	- Deletes a contact by its ID. Regardless of whether the ID exist or not, the response will be 204 No Content.
5. **Add a New Contact**
	- **Endpoint:** `POST /api/persons`
	- Adds a new contact to the phonebook. The ID is generated by MongoDB
	- If the name or number is missing, the request is rejected with an error message.
	- If the name already exist in the phonebook, the request is also rejected.
	- The backend enforces a validation rule where names stored in the database must be at least **three characters long**.
	- If the validation fails, the server responds with an appropriate error message.
	- A phone number must:
		- Have a length of **at least 8 characters**.
		- Be in the format **XX-XXXXXXXX** or **XXX-XXXXXXXX**, where:
			- The first part contains **2 or 3 digits**.
			- The second part contains **only numbers**.
	- A **custom validator** has been implemented in Mongoose to enforce this format.
	- If an invalid phone number is provided, the server responds with an **error message** and an appropriate HTTP status code
6. **Request Logging with Morgan**
	- The Morgan middleware has been integrated to log all HTTP request in the console. Additionally, it has been configured to display the data sent in POST and PUT requests.
7. **Frontend Integration**
	- The backend has been adapted to work with the previously developed frontend. Routes and configurations has been updated to ensure compatibility
8. **Deployment**
	- The backend has been deployed on a cloud service (Render). -> https://fullstackpart3-40i3.onrender.com
9. **MongoDB Database**
	- Data storage has been migrated to MongoDB, using Mongoose for database management.
	- A script (`mongo.js`) has been created to add and list contacts from the command line (`node mongo.js yourpassword Anna 040-1234556`).
	- Data persistence in the database has been implemented for the phonebook functionality.

## Installation and Usage
### Requirements
- Node.js installed
- MongoDB Atlas or a local MongoDB instance
### Installation
Clone this repository
```sh
git clone <REPO_URL>
cd PhonebookApp
```
install dependencies:
```sh
npm install
```
### Configure Environment Variables
Create a `.env` file and add the MongoDB connection URL:
```sh
MONGODB_URI=<YOUR_DATABASE_URL>
```
### Execution
Start the application in normal mode:
```sh
npm start
```
Start the application in development mode (with automatic reload):
```sh
npm run dev
```
## Author
Diego Zapata
Project developed as part of the **Full Stack Open** course
